<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Happy Birthday, Surbala!</title>
    <style>
        body {
            background: linear-gradient(45deg, #ffe6cc, #ffccff, #cce6ff, #ffebcc);
            background-size: 400%;
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 20px;
            overflow: hidden;
            position: relative;
            animation: gradientShift 15s ease infinite;
            perspective: 1000px;
        }
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, transparent 50%, rgba(0, 0, 0, 0.3) 100%);
            pointer-events: none;
            z-index: 1;
        }
        body::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAABJJREFUKFNjZGT8//8/AzMwMgaBlwEAaNAh/QAAAABJRU5ErkJggg==') repeat;
            opacity: 0.1;
            pointer-events: none;
            z-index: 1;
        }
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .intro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            color: white;
            font-size: 24px;
        }
        .intro-overlay.hidden {
            display: none;
        }
        .happy-cats {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        .happy-cat {
            font-size: 40px;
            margin: 0 15px;
            animation: wave 1s infinite;
            transform-style: preserve-3d;
        }
        @keyframes wave {
            0%, 100% { transform: rotate(0deg) translateZ(0); }
            50% { transform: rotate(20deg) translateZ(10px); }
        }
        .surprise-cats {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 11;
            display: none;
        }
        .surprise-cats.show {
            display: block;
        }
        .surprise-cat {
            position: absolute;
            font-size: 40px;
            animation: dance3D 2s infinite, fadeSurprise 3s forwards;
            transform-style: preserve-3d;
        }
        @keyframes dance3D {
            0%, 100% { transform: rotateY(0deg) rotate(0deg) translateY(0) translateZ(0); }
            25% { transform: rotateY(30deg) rotate(15deg) translateY(-20px) translateZ(20px); }
            50% { transform: rotateY(0deg) rotate(0deg) translateY(0) translateZ(0); }
            75% { transform: rotateY(-30deg) rotate(-15deg) translateY(-20px) translateZ(20px); }
        }
        @keyframes fadeSurprise {
            0% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; }
        }
        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
        }
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: #fff;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
        .lens-flare {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.5), transparent);
            border-radius: 50%;
            animation: drift 10s infinite linear;
            z-index: 1;
            transform-style: preserve-3d;
        }
        @keyframes drift {
            0% { transform: translate(-100vw, -100vh) translateZ(0); }
            100% { transform: translate(100vw, 100vh) translateZ(30px); }
        }
        .hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
        }
        .heart {
            position: absolute;
            font-size: 20px;
            color: #ff99cc;
            opacity: 0.5;
            animation: floatHeart 8s infinite linear;
        }
        @keyframes floatHeart {
            0% { transform: translateY(100vh) translateZ(0); opacity: 0.5; }
            100% { transform: translateY(-20vh) translateZ(20px); opacity: 0; }
        }
        .banner {
            font-size: 36px;
            margin: 20px 0;
            position: relative;
            z-index: 2;
        }
        .banner span {
            display: inline-block;
            color: #cc3366;
            padding: 10px;
            margin: 0 5px;
            opacity: 0;
            animation: revealLetter 0.5s forwards;
            transform-style: preserve-3d;
        }
        @keyframes revealLetter {
            0% { opacity: 0; transform: scale(0.5) rotate(-15deg) translateZ(-30px); }
            100% { opacity: 1; transform: scale(1) rotate(0deg) translateZ(30px); }
        }
        .banner span:nth-child(1) { animation-delay: 0.1s; }
        .banner span:nth-child(2) { animation-delay: 0.2s; }
        .banner span:nth-child(3) { animation-delay: 0.3s; }
        .banner span:nth-child(4) { animation-delay: 0.4s; }
        .banner span:nth-child(5) { animation-delay: 0.5s; }
        .banner span:nth-child(6) { animation-delay: 0.6s; }
        .banner span:nth-child(7) { animation-delay: 0.7s; }
        .banner span:nth-child(8) { animation-delay: 0.8s; }
        .banner span:nth-child(9) { animation-delay: 0.9s; }
        .banner span:nth-child(10) { animation-delay: 1.0s; }
        .banner span:nth-child(11) { animation-delay: 1.1s; }
        .banner span:nth-child(12) { animation-delay: 1.2s; }
        .banner span:nth-child(13) { animation-delay: 1.3s; }
        .star-message {
            font-size: 28px;
            color: #3366cc;
            margin: 20px 0;
            position: relative;
            z-index: 2;
            opacity: 0;
            animation: fadeIn 1s forwards;
            animation-delay: 1.5s;
        }
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }
        .lights {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            position: relative;
            z-index: 2;
        }
        .lights div {
            width: 20px;
            height: 20px;
            background-color: #ffcc66;
            border-radius: 50%;
            margin: 0 10px;
            box-shadow: 0 0 15px #ffcc66;
            animation: glow 2s infinite;
            transform-style: preserve-3d;
        }
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 15px #ffcc66; transform: translateZ(0); }
            50% { box-shadow: 0 0 30px #ffcc66; transform: translateZ(10px); }
        }
        .balloons {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            position: relative;
            z-index: 2;
        }
        .balloon {
            width: 60px;
            height: 80px;
            background: linear-gradient(45deg, rgba(255, 102, 102, 1), rgba(255, 153, 153, 0.7));
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            border: 2px solid rgba(255, 255, 255, 0.5);
            margin: 0 10px;
            position: relative;
            color: white;
            font-size: 28px;
            line-height: 80px;
            cursor: pointer;
            opacity: 0;
            animation: flyIn 1s forwards, float 3s infinite ease-in-out, sway 5s infinite ease-in-out, glow 2s infinite;
            transition: transform 0.3s;
            box-shadow: 0 0 25px rgba(255, 102, 102, 1), inset 0 0 10px rgba(255, 255, 255, 0.5);
            z-index: 2;
            transform-style: preserve-3d;
            touch-action: manipulation;
            user-select: none;
        }
        .balloon::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.7), transparent);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            animation: shimmer 3s infinite;
        }
        .balloon::after {
            content: '';
            width: 2px;
            height: 50px;
            background-color: #333;
            position: absolute;
            bottom: -50px;
            left: 29px;
        }
        .balloon:nth-child(1) { animation-delay: 0s, 0s, 0s, 0s; background: linear-gradient(45deg, rgba(255, 102, 102, 1), rgba(255, 153, 153, 0.7)); box-shadow: 0 0 25px rgba(255, 102, 102, 1), inset 0 0 10px rgba(255, 255, 255, 0.5); }
        .balloon:nth-child(2) { animation-delay: 0.5s, 0.2s, 0.2s, 0.2s; background: linear-gradient(45deg, rgba(102, 204, 102, 1), rgba(153, 255, 153, 0.7)); box-shadow: 0 0 25px rgba(102, 204, 102, 1), inset 0 0 10px rgba(255, 255, 255, 0.5); }
        .balloon:nth-child(3) { animation-delay: 1.0s, 0.4s, 0.4s, 0.4s; background: linear-gradient(45deg, rgba(102, 102, 255, 1), rgba(153, 153, 255, 0.7)); box-shadow: 0 0 25px rgba(102, 102, 255, 1), inset 0 0 10px rgba(255, 255, 255, 0.5); }
        .balloon:nth-child(4) { animation-delay: 1.5s, 0.6s, 0.6s, 0.6s; background: linear-gradient(45deg, rgba(255, 204, 102, 1), rgba(255, 229, 153, 0.7)); box-shadow: 0 0 25px rgba(255, 204, 102, 1), inset 0 0 10px rgba(255, 255, 255, 0.5); }
        .balloon:nth-child(5) { animation-delay: 2.0s, 0.8s, 0.8s, 0.8s; background: linear-gradient(45deg, rgba(255, 153, 204, 1), rgba(255, 204, 229, 0.7)); box-shadow: 0 0 25px rgba(255, 153, 204, 1), inset 0 0 10px rgba(255, 255, 255, 0.5); }
        .balloon:nth-child(6) { animation-delay: 2.5s, 1.0s, 1.0s, 1.0s; background: linear-gradient(45deg, rgba(204, 102, 204, 1), rgba(229, 153, 229, 0.7)); box-shadow: 0 0 25px rgba(204, 102, 204, 1), inset 0 0 10px rgba(255, 255, 255, 0.5); }
        .balloon:nth-child(7) { animation-delay: 3.0s, 1.2s, 1.2s, 1.2s; background: linear-gradient(45deg, rgba(102, 204, 255, 1), rgba(153, 229, 255, 0.7)); box-shadow: 0 0 25px rgba(102, 204, 255, 1), inset 0 0 10px rgba(255, 255, 255, 0.5); }
        @keyframes flyIn {
            0% { transform: translateY(100vh) translateZ(-50px); opacity: 0; }
            100% { transform: translateY(0) translateZ(30px); opacity: 1; }
        }
        @keyframes float {
            0%, 100% { transform: translateY(0) translateZ(0); }
            50% { transform: translateY(-15px) translateZ(15px); }
        }
        @keyframes sway {
            0%, 100% { transform: rotate(5deg) translateZ(0); }
            50% { transform: rotate(-5deg) translateZ(10px); }
        }
        @keyframes shimmer {
            0% { transform: translateX(-100%) translateZ(0); }
            100% { transform: translateX(100%) translateZ(10px); }
        }
        .balloon.popped {
            transform: scale(0) translateZ(-50px);
            transition: transform 0.3s;
        }
        .burst {
            position: absolute;
            width: 5px;
            height: 5px;
            background: #ffcc66;
            border-radius: 50%;
            animation: burst 0.5s forwards;
            z-index: 2;
            transform-style: preserve-3d;
        }
        @keyframes burst {
            0% { transform: scale(1) translateZ(0); opacity: 1; }
            100% { transform: scale(3) translateZ(20px); opacity: 0; }
        }
        .sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: radial-gradient(circle, #ffcc66, transparent);
            border-radius: 50%;
            animation: sparkle 1s infinite;
            z-index: 1;
            pointer-events: none;
        }
        @keyframes sparkle {
            0%, 100% { opacity: 1; transform: scale(1) translateZ(0); }
            50% { opacity: 0.3; transform: scale(1.5) translateZ(15px); }
        }
        .cat {
            position: absolute;
            font-size: 40px;
            z-index: 2;
            transform-style: preserve-3d;
        }
        .cat.left {
            left: -50px;
            top: 20%;
            animation: peekLeft 6s infinite, bob 2s infinite;
        }
        .cat.right {
            right: -50px;
            top: 20%;
            animation: peekRight 6s infinite, bob 2s infinite;
        }
        .cat.chase {
            bottom: 0;
            animation: chase 10s infinite linear;
        }
        .cat.dance-left {
            left: 20%;
            top: 70%;
            animation: dance3D 2s infinite;
        }
        .cat.dance-right {
            right: 20%;
            top: 70%;
            animation: dance3D 2s infinite;
        }
        .cat.chase::after {
            content: '‚ú®';
            position: absolute;
            left: -20px;
            animation: trail 0.5s infinite;
        }
        @keyframes peekLeft {
            0%, 100% { transform: translateX(0) translateZ(0); }
            50% { transform: translateX(60px) translateZ(20px); }
        }
        @keyframes peekRight {
            0%, 100% { transform: translateX(0) translateZ(0); }
            50% { transform: translateX(-60px) translateZ(20px); }
        }
        @keyframes chase {
            0% { transform: translateX(-100vw) translateZ(0); }
            100% { transform: translateX(100vw) translateZ(30px); }
        }
        @keyframes bob {
            0%, 100% { transform: translateY(0) translateZ(0); }
            50% { transform: translateY(-10px) translateZ(15px); }
        }
        @keyframes trail {
            0% { opacity: 1; transform: translateX(0) translateZ(0); }
            100% { opacity: 0; transform: translateX(-20px) translateZ(10px); }
        }
        .message {
            font-size: 28px;
            color: #3366cc;
            margin-top: 30px;
            display: none;
            position: relative;
            z-index: 2;
        }
        .message.show {
            display: block;
        }
        .hidden-message {
            font-size: 24px;
            color: #cc3366;
            margin-top: 20px;
            display: none;
            position: relative;
            z-index: 2;
            white-space: pre-wrap;
            max-height: 150px;
            overflow-y: auto;
        }
        .hidden-message.show {
            display: block;
        }
        .final-message {
            font-size: 24px;
            color: #3366cc;
            margin-top: 20px;
            display: none;
            position: relative;
            z-index: 2;
            max-height: 100px;
            overflow-y: auto;
        }
        .final-message.show {
            display: block;
        }
        .wishing {
            font-size: 28px;
            color: #3366cc;
            margin-top: 20px;
            display: none;
            animation: glow 2s infinite;
            position: relative;
            z-index: 2;
        }
        .wishing.show {
            display: block;
        }
        .enjoy-message {
            font-size: 32px;
            color: #cc3366;
            margin-top: 20px;
            display: none;
            position: relative;
            z-index: 2;
            animation: fadeIn 1s forwards;
        }
        .enjoy-message.show {
            display: block;
        }
        .cake-container {
            margin-top: 20px;
            display: none;
            position: relative;
            z-index: 2;
        }
        .cake-container.show {
            display: block;
        }
        .cake {
            font-size: 80px;
            animation: flicker 0.5s infinite;
            transform-style: preserve-3d;
        }
        .cake.cut {
            animation: cutCake 1s forwards;
        }
        @keyframes cutCake {
            0% { transform: rotateY(0deg) translateZ(0); box-shadow: 0 0 0 rgba(0, 0, 0, 0); }
            50% { transform: rotateY(180deg) translateZ(50px); box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.5); }
            100% { transform: rotateY(360deg) translateZ(0); box-shadow: 0 0 0 rgba(0, 0, 0, 0); }
        }
        .cake-prompt {
            font-size: 24px;
            color: #3366cc;
            margin-top: 10px;
            animation: glow 2s infinite;
        }
        .firework {
            position: absolute;
            width: 10px;
            height: 10px;
            background: radial-gradient(circle, #ffcc66, transparent);
            border-radius: 50%;
            animation: firework 1s forwards;
            z-index: 3;
            transform-style: preserve-3d;
        }
        @keyframes firework {
            0% { transform: scale(0) translateZ(0); opacity: 1; }
            100% { transform: scale(5) translateZ(20px); opacity: 0; }
        }
        .typewriter {
            display: inline-block;
            overflow: hidden;
            white-space: nowrap;
            border-right: 2px solid #333;
            animation: typing 2s steps(20, end), blink-caret 0.5s step-end infinite;
        }
        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }
        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: #333; }
        }
        .debug-message {
            font-size: 16px;
            color: #ff0000;
            margin-top: 10px;
            position: relative;
            z-index: 3;
            background: rgba(255, 255, 255, 0.8);
            padding: 5px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="intro-overlay" id="introOverlay">
        <div>Hi, ready for a surprise? Then tap!</div>
        <div class="happy-cats">
            <div class="happy-cat">üê±</div>
            <div class="happy-cat">üê±</div>
            <div class="happy-cat">üê±</div>
        </div>
    </div>
    <div class="surprise-cats" id="surpriseCats"></div>
    <div class="stars" id="starsContainer"></div>
    <div class="hearts" id="heartsContainer"></div>
    <div class="lens-flare" style="top: 10%; left: 20%; animation-delay: 0s;"></div>
    <div class="lens-flare" style="top: 30%; left: 40%; animation-delay: 2s;"></div>
    <div class="lens-flare" style="top: 50%; left: 60%; animation-delay: 4s;"></div>
    <div class="lights">
        <div></div><div></div><div></div><div></div><div></div>
    </div>
    <div class="banner">
        <span>H</span><span>A</span><span>P</span><span>P</span><span>Y</span>
        <span>B</span><span>I</span><span>R</span><span>T</span><span>H</span><span>D</span><span>A</span><span>Y</span>
    </div>
    <div class="star-message">Surbala, you're a star ‚≠ê</div>
    <div class="balloons" id="balloonsContainer">
        <div class="balloon" data-letters="I‚Äôve accepted where I went wrong and the past I regret. But not everything said about me was true,\n" data-final="I know">S</div>
        <div class="balloon" data-letters="and not everything I did was out of bad intent. I just hope one day, you‚Äôll see that too.\n" data-final="things ended">U</div>
        <div class="balloon" data-letters="not trying to defend, just needed to say it for peace. Wishing you the best, always. And yeah(yuhüî•üî•)\n" data-final="on a rough">R</div>
        <div class="balloon" data-letters="Guess we aren‚Äôt talking anymore, but, you. You were one of the best people I ever had met. Happiest birthday to one of the most amazing and special one from my life.\n" data-final="note but yeah(yuhüî•)">B</div>
        <div class="balloon" data-letters="May you have an amazing day today. hanubi olle hanubi If I ever made you feel like a loss, or hurt you unknowingly I‚Äôm really sorry. This message might be the last one, so please tolerate this one.\n" data-final="I'll always remember">A</div>
        <div class="balloon" data-letters="One last thing I had always wished for. From then till now and always will! Wherever you go, whatever you do never lose that pretty smile on your face. gng,twin,gurl,gadha,yerum,thugokchaoüî•üî•üî• Once again, happy birthdayü´∂üèªüç∞\n" data-final="those valuable memories">L</div>
        <div class="balloon" data-letters="And hyningba d mayam leiri ado skthu ro message se yam sangdok khre paragraph ga eye skthu pabu paramgadro khngde btw if it's the last then js know that you'll be missed alot and thanks again for making my life bloom \"Beautiful.lotus \"ü™∑ü©∑ You'll be an unforgettable one. Think my side of story ends here but yeah(yuhüî•) if you ever think of making a change in your decision then yeah (yuhüî•üî•üòÇüôÇ)you're always welcomed throughoutü©µ From Gadhaaaaüî• To Gadhaaaüî• To Gadhaaüî• To Gadha. Boring d khr oira malle bu cdü§¨ü§¨ü§¨" data-final="and the trust you once shared with me. Happy birthday gngü©∑">A</div>
    </div>
    <div class="cat left" id="catLeft">üê±</div>
    <div class="cat right" id="catRight">üê±</div>
    <div class="cat chase" id="catChase">üê±</div>
    <div class="cat dance-left" id="danceCatLeft" style="display: none;">üê±</div>
    <div class="cat dance-right" id="danceCatRight" style="display: none;">üê±</div>
    <div class="message" id="messageDiv">TAP A BALLOON TO REVEAL A SPECIAL MESSAGE!</div>
    <div class="debug-message" id="debugMessage">Debug: Page loading...</div>
    <div class="hidden-message" id="hiddenMessage"></div>
    <div class="final-message" id="finalMessage"></div>
    <div class="wishing" id="wishingMessage">Wishing you the best! üéâ</div>
    <div class="cake-container" id="cakeContainer">
        <div class="cake" id="cake">üéÇ</div>
        <div class="cake-prompt" id="cakePrompt">Tap to Cut the Cake!</div>
    </div>
    <div class="enjoy-message" id="enjoyMessage">Enjoy your day!!</div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script>
        window.onload = function() {
            const debugMessage = document.getElementById('debugMessage');
            try {
                debugMessage.textContent = 'Debug: Page loaded successfully!';

                // Intro overlay with happy cats
                const introOverlay = document.getElementById('introOverlay');
                const happyCats = document.querySelectorAll('.happy-cat');
                const surpriseCatsContainer = document.getElementById('surpriseCats');
                const messageDiv = document.getElementById('messageDiv');
                let canInteractWithBalloons = false;

                debugMessage.textContent = 'Debug: Intro overlay ready...';
                const handleIntroInteraction = (e) => {
                    e.preventDefault();
                    happyCats.forEach(cat => cat.style.animation = 'none');
                    debugMessage.textContent = 'Debug: Happy cats stopped, showing surprise cats...';
                    setTimeout(() => {
                        introOverlay.classList.add('hidden');
                        const surpriseCatsCount = 5;
                        for (let i = 0; i < surpriseCatsCount; i++) {
                            const cat = document.createElement('div');
                            cat.classList.add('surprise-cat');
                            cat.textContent = 'üê±';
                            cat.style.left = `${Math.random() * 100}%`;
                            cat.style.top = `${Math.random() * 100}%`;
                            cat.style.animationDelay = `${Math.random() * 1}s`;
                            surpriseCatsContainer.appendChild(cat);
                        }
                        surpriseCatsContainer.classList.add('show');
                        setTimeout(() => {
                            while (surpriseCatsContainer.firstChild) {
                                surpriseCatsContainer.removeChild(surpriseCatsContainer.firstChild);
                            }
                            debugMessage.textContent = 'Debug: Surprise cats removed, showing balloons...';
                            messageDiv.classList.add('show');
                            canInteractWithBalloons = true;
                            debugMessage.textContent = 'Debug: Waiting for balloon tap...';
                        }, 3000);
                    }, 500);
                };
                introOverlay.addEventListener('click', handleIntroInteraction);
                introOverlay.addEventListener('touchend', handleIntroInteraction);

                // Add stars to background
                const starsContainer = document.getElementById('starsContainer');
                function addStars() {
                    const starsCount = 30;
                    for (let i = 0; i < starsCount; i++) {
                        const star = document.createElement('div');
                        star.classList.add('star');
                        star.style.left = `${Math.random() * 100}%`;
                        star.style.top = `${Math.random() * 100}%`;
                        star.style.animationDelay = `${Math.random() * 3}s`;
                        starsContainer.appendChild(star);
                    }
                }
                addStars();

                // Add floating hearts to background
                const heartsContainer = document.getElementById('heartsContainer');
                function addHearts() {
                    const heartsCount = 10;
                    for (let i = 0; i < heartsCount; i++) {
                        const heart = document.createElement('div');
                        heart.classList.add('heart');
                        heart.textContent = '‚ù§Ô∏è';
                        heart.style.left = `${Math.random() * 100}%`;
                        heart.style.animationDelay = `${Math.random() * 8}s`;
                        heartsContainer.appendChild(heart);
                    }
                }
                addHearts();

                // Confetti effect with shapes
                function launchConfetti() {
                    try {
                        confetti({
                            particleCount: 100,
                            spread: 80,
                            origin: { y: 0.6 },
                            shapes: ['circle', 'square', 'triangle', 'heart'],
                            colors: ['#ff6666', '#66cc66', '#6666ff', '#ffcc66', '#ff99cc']
                        });
                        debugMessage.textContent = 'Debug: Confetti launched...';
                    } catch (error) {
                        debugMessage.textContent = `Debug: Confetti error: ${error.message}`;
                    }
                }
                setTimeout(() => {
                    setInterval(launchConfetti, 3000);
                }, 5000);

                // Add sparkles around balloons
                const balloonsContainer = document.getElementById('balloonsContainer');
                function addSparkles() {
                    const sparklesCount = 5;
                    for (let i = 0; i < sparklesCount; i++) {
                        const sparkle = document.createElement('div');
                        sparkle.classList.add('sparkle');
                        sparkle.style.left = `${Math.random() * 100}%`;
                        sparkle.style.top = `${Math.random() * 100}%`;
                        sparkle.style.animationDelay = `${Math.random() * 1}s`;
                        balloonsContainer.appendChild(sparkle);
                    }
                }
                addSparkles();

                // Fireworks effect
                function launchFireworks() {
                    const fireworksCount = 100;
                    for (let i = 0; i < fireworksCount; i++) {
                        const firework = document.createElement('div');
                        firework.classList.add('firework');
                        firework.style.left = `${Math.random() * 100}%`;
                        firework.style.top = `${Math.random() * 100}%`;
                        firework.style.animationDelay = `${Math.random() * 2}s`;
                        document.body.appendChild(firework);
                    }
                }
                function continuousFireworks() {
                    launchFireworks();
                    const interval = setInterval(launchFireworks, 2000);
                    setTimeout(() => clearInterval(interval), 10000);
                }

                // Balloon game
                const balloons = document.querySelectorAll('.balloon');
                const hiddenMessageDiv = document.getElementById('hiddenMessage');
                const finalMessageDiv = document.getElementById('finalMessage');
                const wishingMessageDiv = document.getElementById('wishingMessage');
                const cakeContainer = document.getElementById('cakeContainer');
                const cake = document.getElementById('cake');
                const cakePrompt = document.getElementById('cakePrompt');
                const catLeft = document.getElementById('catLeft');
                const catRight = document.getElementById('catRight');
                const catChase = document.getElementById('catChase');
                const danceCatLeft = document.getElementById('danceCatLeft');
                const danceCatRight = document.getElementById('danceCatRight');
                const enjoyMessage = document.getElementById('enjoyMessage');
                let poppedCount = 0;
                const fullHiddenMessage = "I‚Äôve accepted where I went wrong and the past I regret. But not everything said about me was true,\nand not everything I did was out of bad intent. I just hope one day, you‚Äôll see that too.\nnot trying to defend, just needed to say it for peace. Wishing you the best, always. And yeah(yuhüî•üî•)\nGuess we aren‚Äôt talking anymore, but, you. You were one of the best people I ever had met. Happiest birthday to one of the most amazing and special one from my life.\nMay you have an amazing day today. hanubi olle hanubi If I ever made you feel like a loss, or hurt you unknowingly I‚Äôm really sorry. This message might be the last one, so please tolerate this one.\nOne last thing I had always wished for. From then till now and always will! Wherever you go, whatever you do never lose that pretty smile on your face. gng,twin,gurl,gadha,yerum,thugokchaoüî•üî•üî• Once again, happy birthdayü´∂üèªüç∞\nAnd hyningba d mayam leiri ado skthu ro message se yam sangdok khre paragraph ga eye skthu pabu paramgadro khngde btw if it's the last then js know that you'll be missed alot and thanks again for making my life bloom \"Beautiful.lotus \"ü™∑ü©∑ You'll be an unforgettable one. Think my side of story ends here but yeah(yuhüî•) if you ever think of making a change in your decision then yeah (yuhüî•üî•üòÇüôÇ)you're always welcomed throughoutü©µ From Gadhaaaaüî• To Gadhaaaüî• To Gadhaaüî• To Gadha. Boring d khr oira malle bu cdü§¨ü§¨ü§¨";
                let revealedMessage = [];
                let finalMessage = [];

                const messageChunks = fullHiddenMessage.split('\n');
                const chunkedMessages = Array.from(balloons).map((balloon, index) => ({
                    letters: balloon.getAttribute('data-letters'),
                    final: balloon.getAttribute('data-final')
                }));

                const popBalloon = (balloon, index) => {
                    if (!canInteractWithBalloons) {
                        debugMessage.textContent = 'Debug: Please wait for the intro to finish...';
                        return;
                    }
                    if (!balloon.classList.contains('popped')) {
                        debugMessage.textContent = `Debug: Balloon ${balloon.textContent} tapped!`;
                        balloon.classList.add('popped');
                        poppedCount++;
                        const chunk = chunkedMessages[index];
                        revealedMessage.push(chunk.letters);
                        finalMessage.push(chunk.final);

                        try {
                            hiddenMessageDiv.textContent = revealedMessage.join('');
                            finalMessageDiv.textContent = finalMessage.join(' ');
                            hiddenMessageDiv.classList.remove('typewriter');
                            void hiddenMessageDiv.offsetWidth;
                            hiddenMessageDiv.classList.add('show', 'typewriter');
                            finalMessageDiv.classList.add('show');
                            hiddenMessageDiv.scrollTop = hiddenMessageDiv.scrollHeight;
                            finalMessageDiv.scrollTop = finalMessageDiv.scrollHeight;
                        } catch (error) {
                            debugMessage.textContent = `Debug: Error displaying message: ${error.message}`;
                        }

                        for (let i = 0; i < 5; i++) {
                            const burst = document.createElement('div');
                            burst.classList.add('burst');
                            burst.style.left = `${balloon.offsetLeft + 25}px`;
                            burst.style.top = `${balloon.offsetTop + 35}px`;
                            burst.style.transform = `translate(${Math.random() * 40 - 20}px, ${Math.random() * 40 - 20}px)`;
                            balloonsContainer.appendChild(burst);
                        }

                        if (poppedCount === balloons.length) {
                            hiddenMessageDiv.textContent = fullHiddenMessage;
                            hiddenMessageDiv.classList.remove('typewriter');
                            void hiddenMessageDiv.offsetWidth;
                            hiddenMessageDiv.classList.add('show', 'typewriter');
                            messageDiv.style.display = 'none';
                            wishingMessageDiv.classList.add('show');
                            setTimeout(() => {
                                cakeContainer.classList.add('show');
                            }, 1000);
                        }
                    }
                };

                const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
                balloons.forEach((balloon, index) => {
                    if (isTouchDevice) {
                        balloon.addEventListener('touchstart', (e) => {
                            e.preventDefault();
                            e.stopPropagation();
                            popBalloon(balloon, index);
                        });
                    } else {
                        balloon.addEventListener('click', () => popBalloon(balloon, index));
                    }
                });

                // Cake cutting interaction
                const handleCakeInteraction = (e) => {
                    e.preventDefault();
                    if (!cake.classList.contains('cut')) {
                        debugMessage.textContent = 'Debug: Cake tapped, cutting...';
                        cake.classList.add('cut');
                        cake.textContent = 'üç∞';
                        cakePrompt.textContent = 'Surbala Cuts the Cake! Yeahhh Happy Sweet 17 üéâ';
                        continuousFireworks();
                        launchConfetti();
                        catLeft.style.display = 'none';
                        catRight.style.display = 'none';
                        catChase.style.display = 'none';
                        danceCatLeft.style.display = 'block';
                        danceCatRight.style.display = 'block';
                        setTimeout(() => {
                            enjoyMessage.classList.add('show');
                            continuousFireworks();
                        }, 1000);
                    }
                };
                cakeContainer.addEventListener('click', handleCakeInteraction);
                cakeContainer.addEventListener('touchstart', handleCakeInteraction);

                // Fallback debug if no balloons are tapped after a while
                setTimeout(() => {
                    if (poppedCount === 0 && canInteractWithBalloons) {
                        debugMessage.textContent = 'Debug: No balloons tapped yet. Try tapping harder.';
                    }
                }, 15000);
            } catch (error) {
                debugMessage.textContent = `Debug: JavaScript error: ${error.message}`;
            }
        };
    </script>
</body>
</html>
